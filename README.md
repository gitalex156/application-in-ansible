# Проект Ansible для настройки сервера Nginx

Данный проект автоматизирует процесс настройки сервера Nginx с использованием Ansible. Он упрощает развёртывание веб-приложений, гарантируя единообразную и надёжную конфигурацию в разных окружениях. Настройка включает размещение статической HTML-страницы и интеграцию с Telegram-ботом для предоставления дополнительной функциональности.

## **Структура проекта**

. └── ansible ├── ansible.cfg # Конфигурационный файл Ansible ├── inventory │ └── hosts.yml # Инвентарь с данными о целевых хостах ├── playbooks │ └── setup.yml # Playbook для настройки сервера └── templates ├── index.html.j2 # Шаблон HTML-страницы └── nginx.conf.j2 # Шаблон конфигурации Nginx

---

## **Функциональность**

1. **Автоматизированная настройка сервера Nginx**

   - Установка и настройка веб-сервера Nginx.
   - Развёртывание статической HTML-страницы с использованием шаблонов Jinja2.
   - Настройка виртуального хоста для обслуживания приложения.

2. **Интеграция с Telegram-ботом**

   - Статическая HTML-страница содержит ссылку на Telegram-бота.
   - Бот предоставляет данные о торговых акциях (цены закрытия и объёмы торгов для AAPL и MSFT).

3. **Динамическое создание файлов конфигурации**

   - Шаблоны Jinja2 (`index.html.j2` и `nginx.conf.j2`) генерируют файлы конфигурации на основе переменных, специфичных для хоста.

4. **Идемпотентность playbook'ов**

   - Все задачи playbook'а можно повторно выполнять без возникновения непредвиденных последствий.

5. **Гибкое управление инвентарём**
   - YAML-файл инвентаря (`hosts.yml`) упрощает управление целевыми хостами, поддерживая масштабируемость и кастомизацию.

---

## **Требования**

1. **Установленный Ansible на управляющей машине**

   - Убедитесь, что Ansible установлен и настроен. [Руководство по установке](https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html)

2. **Настройка целевого хоста**

   - Виртуальная машина или сервер на базе Ubuntu (указан в инвентаре `hosts.yml`).
   - Настроена аутентификация через SSH-ключи между управляющей машиной и целевым хостом.

3. **Зависимости**
   - Python и необходимые библиотеки (`python3`, `python3-pip`, `python3-venv`, `python3-six`) устанавливаются playbook'ом.

---

## **Настройка и использование**

### 1. **Клонирование репозитория**

```bash
git clone <repository-url>
cd AnsibprojectNginx/ansible
```

### 2. **Настройка инвентаря**

Необходимо отредактировать файл inventory/hosts.yml, добавив данные о целевом хосте:

```bash
all:
  hosts:
    vm1:
      ansible_host: <ip-сервера>
      ansible_user: <ssh-пользователь>
      ansible_ssh_private_key_file: ~/.ssh/id_rsa
```

### 3. **Запуск playbook'а**

Необходимо выполнить playbook для настройки сервера:

```bash
ansible-playbook playbooks/setup.yml
```

### 4. **Доступ к веб-странице**

Откройте браузер и перейдите по IP-адресу сервера, чтобы увидеть развернутую HTML-страницу.
Проверка: http://158.160.74.200

Автор: Alex
Email: [vla56240@gmail.com]
Telegram: [@robotsinfo]
